# Basic Guide
## Getting started
Dont know anything about Lua? Check out [this](https://www.tutorialspoint.com/lua/index.htm) guide or any other you like

### Directory structure

Once you setup this plugin and generate all required folders it should look like this.<br>
└── LuaLab --Generated by SL for your plugin.<br>
    ├── LuaPlugins -- Put your .lua files here, anything in here will be executed on start<br>
    │   └── deps -- Put any dependencies for your .lua files in here, they wont load unless you require them<br>
    └── Config.yaml -- Plugin configuration file<br>

## Main method
Lua doesnt have any entry point method, it is simply executed from top bottom. However, since I support hot reload, there is a dedicated method that runs only once for a whole Lua plugin. This means any global variables required and initially setup should be declared there with global scope.<br>

## Naming Convetions
You can use both **P**ascal**C**ase or **c**amel**C**ase for accessing properties and methods. You can also use both `.` and `:` for accessing methods. 99.9% it doesnt matter.

## Global Variables
Plugin automatically adds several global variable ranging from reference for local `plugin`, to `events`, `facility`, `server` and more.<br> One that I would like to focus on start is `plugin` which is a representation of... this plugin!<br>
`plugin` object has several properties and events you can hook into:
<br><br>
`Name` - Name of this plugin (Lua file it is executing basically) **READONLY** <br>
`PluginPath` - Absolute path to this Lua file **READONLY** <br>
`PluginLoaded` - Executed only one time during server start and file load for the first time. It is not executed with hot and live reloads<br>
`PluginReloading` - Event that is fired before any reload code is executed internaly, save your unsaved stuff etc<br>
`PluginReloaded` - Event that is fired after plugin is reloaded<br>
`PluginUnloading` - Last method that is executed. Plugins may be unloaded forcefully by a command or with server stop/restart<br>

## Events
You may hook/unhook into events by these two functions<br>
`:add(yourFunction)` - adds a function for execution once the event is invoked<br>
`:remove(yourFunction)` - removes a function from execution<br>
You can pass both normal and annonymous function into it.<br>
Every event hook function has only one `args` object as a first parameter.<br>

Code example:
```lua
print('Markiplier'); -- Print output is redirected to server console / executing player RA console

function onPluginLoad(args) -- This will be fired automatically once the plugin fully loads and only once
    print("Sample code loaded!")
end
plugin.PluginLoaded:add(onPluginLoad) -- You can either pass function by declaring it somewhere else


plugin.PluginLoaded:add(function(args)  -- Or you can directly add it as a anonymous function
    print("Sample code loaded!")
end)

Plugin.PluginReloaded:add(function(args) -- Called after the reload has been fully executed
    if math:random() < 0.5 then
        print("AAAA I NEEED A MEDIC BAG")
    else
        print("ITS PAYDAY FELLAS")
    end
end)
```

## Executing in RA
You need your steamID be specified in plugin config file to be able to exec any code.<br>
Put all lua code inside of a single line starting with `lua`

Example:<br>
`lua print("a")`<br>
`for key, value in pairs(Players.AllPlayers) do value:broadcast("Sí plas plas", 5) end`
